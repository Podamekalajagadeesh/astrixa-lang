// ============================================================================
// ASTRIXA Standard Library - AI Module
// First-class AI integration, no Python dependency hell
// Deterministic, safe, fast
// ============================================================================

// ============================================================================
// Core AI Operations
// ============================================================================

// Generate text with AI model
// Safe: Rate-limited, timeout protection
// Example: let response = generate("Write a poem about ASTRIXA")
export fn generate(prompt: string) -> string {
    // Built-in implementation
}

// Generate with options
// Example: let response = generate_with_options(prompt, options)
export fn generate_with_options(prompt: string, options: GenerateOptions) -> string {
    // Built-in implementation
}

// Classify text into categories
// Deterministic: Same input always gives same output
// Example: let category = classify("This is amazing!", ["positive", "negative"])
export fn classify(text: string, categories: array) -> string {
    // Built-in implementation
}

// Analyze text sentiment
// Example: let sentiment = analyze_sentiment("I love ASTRIXA!")
export fn analyze_sentiment(text: string) -> SentimentResult {
    // Built-in implementation
}

// Extract named entities from text
// Example: let entities = extract_entities("John works at Google")
export fn extract_entities(text: string) -> array {
    // Built-in implementation
}

// Summarize text
// Example: let summary = summarize(long_text, max_length: 100)
export fn summarize(text: string, max_length: int) -> string {
    // Built-in implementation
}

// Generate embeddings (vector representation)
// Safe: Fixed dimension, normalized
// Example: let embedding = embed("hello world")
export fn embed(text: string) -> Embedding {
    // Built-in implementation
}

// Calculate similarity between two texts
// Example: let similarity = similarity("cat", "kitten")  // 0.0-1.0
export fn similarity(text1: string, text2: string) -> float {
    // Built-in implementation
}

// Semantic search through documents
// Example: let results = semantic_search("best practices", documents)
export fn semantic_search(query: string, documents: array) -> array {
    // Built-in implementation
}

// Detect language of text
// Example: let lang = detect_language("Bonjour le monde")
export fn detect_language(text: string) -> string {
    // Built-in implementation
}

// Translate text to another language
// Example: let translation = translate("Hello", "en", "es")
export fn translate(text: string, from_lang: string, to_lang: string) -> string {
    // Built-in implementation
}

// ============================================================================
// Question Answering
// ============================================================================

// Answer question based on context
// Example: let answer = answer_question("What is ASTRIXA?", context_text)
export fn answer_question(question: string, context: string) -> string {
    // Built-in implementation
}

// Extract answers from multiple documents
// Example: let answers = qa_search(question, documents)
export fn qa_search(question: string, documents: array) -> array {
    // Built-in implementation
}

// ============================================================================
// Content Generation
// ============================================================================

// Generate variations of text
// Example: let variations = paraphrase("Hello world", count: 3)
export fn paraphrase(text: string, count: int) -> array {
    // Built-in implementation
}

// Generate code from description
// Example: let code = generate_code("factorial function in ASTRIXA")
export fn generate_code(description: string) -> string {
    // Built-in implementation
}

// Complete text (like GitHub Copilot)
// Example: let completion = complete("fn main() {")
export fn complete(text: string) -> string {
    // Built-in implementation
}

// ============================================================================
// Safety & Moderation
// ============================================================================

// Detect harmful content
// Safe: Prevents toxic content
// Example: if is_toxic("some text") { block_content() }
export fn is_toxic(text: string) -> bool {
    // Built-in implementation
}

// Detect spam
// Example: if is_spam(email_text) { filter() }
export fn is_spam(text: string) -> bool {
    // Built-in implementation
}

// Moderate content for unsafe topics
// Example: let safe_text = moderate(user_input)
export fn moderate(text: string) -> ModerationResult {
    // Built-in implementation
}

// ============================================================================
// Structured Output
// ============================================================================

// Extract structured data from text
// Example: let data = extract_json("Key: value, Count: 5")
export fn extract_json(text: string) -> object {
    // Built-in implementation
}

// Extract table data from text
// Example: let table = extract_table(document)
export fn extract_table(text: string) -> array {
    // Built-in implementation
}

// ============================================================================
// Image Analysis (if multimodal support added)
// ============================================================================

// Describe image
// Example: let description = describe_image("image.jpg")
export fn describe_image(image_path: string) -> string {
    // Built-in implementation
}

// Extract text from image (OCR)
// Example: let text = ocr("document.png")
export fn ocr(image_path: string) -> string {
    // Built-in implementation
}

// ============================================================================
// Batch Operations
// ============================================================================

// Process multiple texts in batch
// Efficient: Better throughput
// Example: let results = batch_classify(texts, categories)
export fn batch_classify(texts: array, categories: array) -> array {
    // Built-in implementation
}

// Batch embeddings
// Example: let embeddings = batch_embed(texts)
export fn batch_embed(texts: array) -> array {
    // Built-in implementation
}

// ============================================================================
// Type: GenerateOptions
// Configuration for text generation
// ============================================================================

export type GenerateOptions {
    max_tokens: int         // Max output length
    temperature: float      // Creativity (0.0-2.0)
    top_p: float           // Nucleus sampling
    frequency_penalty: float
    presence_penalty: float
    stop_sequences: array
    fn new() -> GenerateOptions
}

// ============================================================================
// Type: SentimentResult
// Sentiment analysis result
// ============================================================================

export type SentimentResult {
    label: string           // "positive", "negative", "neutral"
    score: float           // 0.0-1.0 confidence
    scores: map            // Detailed scores per sentiment
}

// ============================================================================
// Type: Embedding
// Vector representation of text
// ============================================================================

export type Embedding {
    vector: array          // Fixed-size float array
    dim: int              // Dimension (typically 384, 768, 1536)
    model: string         // Model used for embedding
    
    fn similarity(other: Embedding) -> float  // Cosine similarity
    fn distance(other: Embedding) -> float    // L2 distance
}

// ============================================================================
// Type: Entity
// Named entity extracted from text
// ============================================================================

export type Entity {
    text: string          // The entity text
    label: string         // Type: PERSON, ORG, LOCATION, etc.
    start: int           // Start position in original text
    end: int             // End position
    confidence: float    // 0.0-1.0
}

// ============================================================================
// Type: ModerationResult
// Content moderation result
// ============================================================================

export type ModerationResult {
    safe: bool                    // Is content safe?
    scores: map                   // Scores per category
    
    // Categories with scores:
    // - violence: 0.0-1.0
    // - sexual: 0.0-1.0
    // - harassment: 0.0-1.0
    // - hate_speech: 0.0-1.0
    // - self_harm: 0.0-1.0
    // - illegal: 0.0-1.0
}

// ============================================================================
// Type: SearchResult
// Semantic search result
// ============================================================================

export type SearchResult {
    document: any              // Original document
    score: float              // 0.0-1.0 relevance
    highlights: array         // Matching sections
}

// ============================================================================
// Configuration
// ============================================================================

// Set AI model
// Example: set_model("gpt-4")
export fn set_model(model_name: string) {
    // Built-in implementation
}

// Set API key for AI service
// Safe: Doesn't log keys
// Example: set_api_key("sk-...")
export fn set_api_key(key: string) {
    // Built-in implementation
}

// Configure defaults
// Example: configure(options)
export fn configure(options: AIConfig) {
    // Built-in implementation
}

export type AIConfig {
    model: string
    temperature: float
    timeout: int
    max_retries: int
}

// ============================================================================
// Example Usage
// ============================================================================

// Text generation:
// let poem = generate("Write a haiku about programming")
//
// Classification:
// let category = classify("I love this!", ["positive", "negative"])
//
// Sentiment:
// let sentiment = analyze_sentiment("ASTRIXA is amazing!")
// print(sentiment.label)     // "positive"
// print(sentiment.score)     // 0.95
//
// Embeddings & search:
// let query_embedding = embed("find documents about AI")
// let doc_embeddings = batch_embed(documents)
// for doc in documents {
//     let sim = query_embedding.similarity(doc_embedding)
//     if sim > 0.7 {
//         print(doc)
//     }
// }
//
// Moderation:
// let result = moderate(user_input)
// if result.safe {
//     post_comment(user_input)
// }
//
// Q&A:
// let answer = answer_question("What is ASTRIXA?", documentation)
//
// Content extraction:
// let data = extract_json("Name: John, Age: 30")
// print(data.Name)
// print(data.Age)
